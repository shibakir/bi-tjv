<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Meme settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
    <body style="background-color: #fac9c9; margin: 2%;">
        <form action="#" th:action="@{/memes/edit}" th:object="${memeDTO}" method="post">

            <div class="form-group" style="display: none;">
                <label>Meme:</label>
                <input type="text" id="name" name="name" th:field="*{name}" class="form-control"/><br/>
            </div>
            <div class="form-group">
                <label><h3 style="margin-bottom: 2%;">Obsah dalsiho nejlepsiho anekdotu:</h3></label>
                <textarea id="pathName" name="path_name" th:field="*{path_name}" class="form-control" required oninput="checkLength()"></textarea>
                <small id="lengthMessage" class="form-text text-danger"></small>
            </div>
            <input type="submit" class="btn btn-primary" id="submitButton" disabled/>
        </form>
        <a class="global hrefs btn btn-secondary mt-3" href="/memes">Back to memes</a>
        <a class="global hrefs btn btn-secondary mt-3" href="/">Back to welcome page</a>

        <script>
            function checkLength() {
                var maxLength = 255;
                var textarea = document.getElementById('pathName');
                var lengthMessage = document.getElementById('lengthMessage');
                var submitButton = document.getElementById('submitButton');

                if (textarea.value.length > maxLength) {
                    lengthMessage.textContent = 'Text length exceeds the limit of ' + maxLength + ' characters.';
                    submitButton.disabled = true;
                } else {
                    lengthMessage.textContent = '';
                    submitButton.disabled = false;
                }
            }
        </script>
    </body>
</html>
